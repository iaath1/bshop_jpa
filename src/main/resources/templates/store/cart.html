<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>–ö–æ—Ä–∑–∏–Ω–∞ - MyStore</title>
    <link rel="stylesheet" th:href="@{/css/store.css}">
</head>
<body>
<header class="header">
    <div class="container header-inner">
        <div class="logo">üõç MyStore</div>
        <nav class="nav">
            <a th:href="@{/}">–ì–ª–∞–≤–Ω–∞—è</a>
            <a th:href="@{/catalog}">–ö–∞—Ç–∞–ª–æ–≥</a>
            <a th:href="@{/cart}" class="active">–ö–æ—Ä–∑–∏–Ω–∞</a>
            <a th:href="@{/contacts}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            <a th:href="@{/users/profile}" class="profile-link active">üë§</a>
        </nav>
    </div>
</header>

<main class="container cart-page">
    <h2 class="page-title">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>

    <!-- –ï—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ -->
    <div th:if="${#lists.isEmpty(cartItems)}" class="cart-empty">
        <p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üòî</p>
        <a th:href="@{/catalog}" class="btn">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
    </div>

    <!-- –ï—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –Ω–µ –ø—É—Å—Ç–∞ -->
    <div th:if="${!#lists.isEmpty(cartItems)}" class="cart-content">
        <div class="cart-items">
            <div class="cart-item" th:each="item : ${cartItems}">
                <div class="cart-item-info">
                    <img th:src="@{${item.product.imageUrl}}" alt="–§–æ—Ç–æ" class="cart-thumb">
                    <div class="cart-item-details">
                        <h3 th:text="${item.product.name}" class="cart-item-name"></h3>
                        <p class="cart-item-price" th:text="${item.product.price} + ' ‚ÇΩ'"></p>
                    </div>
                </div>

                <form th:action="@{/store/cart/update}" method="post" class="cart-item-actions">
                    <input type="hidden" name="cartItemId" th:value="${item.id}">
                    <input type="hidden" name="productId" th:value="${item.product.id}">
                    <input type="number" name="quantity" min="1" th:value="${item.quantity}" class="qty-input">
                    <button type="submit" class="btn-small">–û–±–Ω–æ–≤–∏—Ç—å</button>
                </form>

                <div class="cart-item-sum">
                    <span th:text="${item.product.price * item.quantity} + ' ‚ÇΩ'"></span>
                </div>

                <form th:action="@{/store/cart/delete/{id}(id=${item.id})}" method="post" class="cart-item-remove">
                    <button type="submit" class="btn-small danger">‚úñ</button>
                </form>
            </div>
        </div>

        <!-- –ë–ª–æ–∫ –∏—Ç–æ–≥–∞ -->
        <aside class="cart-summary">
            <h3>–ò—Ç–æ–≥–æ</h3>
            <p class="cart-total">
                <span th:text="${total} + ' ‚ÇΩ'"></span>
            </p>
            <a th:href="@{/checkout}" class="btn btn-primary">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</a>
            <a th:href="@{/catalog}" class="btn btn-secondary">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</a>
        </aside>
    </div>
</main>

<footer class="footer">
    <p>¬© 2025 MyStore. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
</footer>
</body>
</html>
