<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>–ö–æ—Ä–∑–∏–Ω–∞ - MyStore</title>
    <link rel="stylesheet" th:href="@{/css/store.css}">
</head>
<body>
<header class="header">
    <div class="container header-inner">
        <div class="logo">üõç MyStore</div>
        <nav class="nav">
            <a th:href="@{/}">–ì–ª–∞–≤–Ω–∞—è</a>
            <a th:href="@{/catalog}">–ö–∞—Ç–∞–ª–æ–≥</a>
            <a th:href="@{/cart}" class="active">–ö–æ—Ä–∑–∏–Ω–∞</a>
            <a th:href="@{/contacts}">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
        </nav>
    </div>
</header>

<main class="container">
    <h2>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>

    <div th:if="${#lists.isEmpty(cartItems)}">
        <p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üòî</p>
        <a th:href="@{/catalog}" class="btn">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
    </div>

    <div th:if="${!#lists.isEmpty(cartItems)}" class="cart">
        <table class="cart-table">
            <thead>
            <tr>
                <th>–¢–æ–≤–∞—Ä</th>
                <th>–¶–µ–Ω–∞</th>
                <th>–ö–æ–ª-–≤–æ</th>
                <th>–°—É–º–º–∞</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${cartItems}">
                <td class="cart-product">
                    <img th:src="@{${item.product.imageUrl}}" alt="–§–æ—Ç–æ" class="cart-thumb">
                    <span th:text="${item.product.name}"></span>
                </td>
                <td th:text="${item.product.price} + ' ‚ÇΩ'"></td>
                <td>
                    <form th:action="@{/store/cart/update}" method="post" class="qty-form">
                        <input type="hidden" name="cartItemId" th:value="${item.id}">
                        <input type="hidden" name="productId" th:value="${item.product.id}">
                        <input type="number" name="quantity" min="1" th:value="${item.quantity}" class="qty-input">
                        <button type="submit" class="btn-small">–û–±–Ω–æ–≤–∏—Ç—å</button>
                    </form>
                </td>
                <td th:text="${item.product.price * item.quantity} + ' ‚ÇΩ'"></td>
                <td>
                    <form th:action="@{/store/cart/delete/{id}(id=${item.id})}" method="post">
                        <button type="submit" class="btn-small danger">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="cart-summary">
            <h3>–ò—Ç–æ–≥–æ: <span th:text="${total} + ' ‚ÇΩ'"></span></h3>
            <a th:href="@{/checkout}" class="btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</a>
        </div>
    </div>
</main>

<footer class="footer">
    <p>¬© 2025 MyStore. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
</footer>
</body>
</html>
